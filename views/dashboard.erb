<!DOCTYPE html>
<html>
  <head>
    <link rel="stylesheet" type="text/css" href="/bootstrap.min.css" />
    <link href="//maxcdn.bootstrapcdn.com/font-awesome/4.2.0/css/font-awesome.min.css" rel="stylesheet" />
    <link rel="stylesheet" type="text/css" href="/dashboard.css" />
  </head>
  <body>
    <%= partial(:topbar_template) %>
    <div class="container">

      <div class="row">
        <div class="col-md-12 text-center">
          <h1>ダッシュボード</h1>
        </div>
      </div>

      <hr />

      <div class="row">
        <div class="col-md-6">
          <div class="panel panel-default">
            <div class="panel-body">
              <div class="row">
                <div class="col-md-12" style="height:572px;">
                  <h2 id="temp"><img src="/water.png" />&nbsp;<%= data[1]["sensors"][2]["number of readings"] %> &deg;C</h2>
                  <h2 id="wind"><img src="/wind.png" />&nbsp;<%= data[1]["sensors"][0]["number of readings"] %> m/s</h2>
                  <img id="rice_pic" src="/happyrice.jpg" />
                  <h2 id="height"><%= data[1]["sensors"][1]["number of readings"] %> cm</h2>
                  <img id="height_pic" src="/height.png" />
                </div>
              </div>
            </div>
          </div>
        </div>

        <div class="col-md-6">
          <div class="panel panel-default">
            <div class="panel-heading">
              <h3 class="panel-title">環境の状況</h3>
            </div>
            <div class="panel-body">
              <div class="row">
                <div class="col-md-3 text-center">
                  <strong>水位</strong>
                </div>
                <div class="col-md-3">
                  <%= data[1]["sensors"][1]["number of readings"] %> cm
                </div>
                <div class="col-md-3">
                  (- 1.5 cm)
                </div>
                <div class="col-md-3">
                  <a href="#" class="label label-info">詳細</a>
                </div>
              </div>
              <div class="row">
                <div class="col-md-3 text-center">
                  <strong>温度</strong>
                </div>
                <div class="col-md-3">
                  <%= data[1]["sensors"][2]["number of readings"] %> &deg;C
                </div>
                <div class="col-md-3">
                  (+ 0.5 &deg;C)
                </div>
                <div class="col-md-3">
                  <a href="#" class="label label-info">詳細</a>
                </div>
              </div>
              <div class="row">
                <div class="col-md-3 text-center">
                  <strong>湿度</strong>
                </div>
                <div class="col-md-3">
                  45 %
                </div>
                <div class="col-md-3">
                  (+ 10 %)
                </div>
                <div class="col-md-3">
                  <a href="#" class="label label-info">詳細</a>
                </div>
              </div>
              <div class="row">
                <div class="col-md-3 text-center">
                  <strong>風速</strong>
                </div>
                <div class="col-md-3">
                  <%= data[1]["sensors"][0]["number of readings"] %> m/s
                </div>
                <div class="col-md-3">
                  (N/A)
                </div>
                <div class="col-md-3">
                  <a href="#" class="label label-info">詳細</a>
                </div>
              </div>
            </div>
          </div>

          <div class="panel panel-default">
            <div class="panel-heading">
              <h3 class="panel-title">端末の状況</h3>
            </div>
            <div class="panel-body">
              <div class="row">
                <div class="col-md-3 text-center">
                  <strong>温度</strong>
                </div>
                <div class="col-md-3">
                  <%= data[1]["sensors"][2]["number of readings"] + 12 %> &deg;C
                </div>
                <div class="col-md-3">
                  (- 0.7 &deg;C)
                </div>
                <div class="col-md-3">
                  <a href="#" class="label label-success">詳細</a>
                </div>
              </div>
              <div class="row">
                <div class="col-md-3 text-center">
                  <strong>湿度</strong>
                </div>
                <div class="col-md-3">
                  5 %
                </div>
                <div class="col-md-3">
                  (+ 0.5 %)
                </div>
                <div class="col-md-3">
                  <a href="#" class="label label-success">詳細</a>
                </div>
              </div>
            </div>
          </div>


          <div class="panel panel-default">
            <div class="panel-heading">
              <h3 class="panel-title">端末のデータ</h3>
            </div>
            <div class="panel-body">
              <div class="col-md-6">
                <a href="/dashboard/map" class="btn btn-success btn-lg btn-block"><i class="fa fa-map-marker"></i>&nbsp;&nbsp;&nbsp; 端末地図</a>
              </div>
              <div class="col-md-6">
                <a href="/dashboard/nodes" class="btn btn-success btn-lg btn-block"><i class="fa fa-bar-chart"></i>&nbsp;&nbsp;&nbsp; 統計データ</a>
              </div>
            </div>
          </div>

          <div class="panel panel-default">
            <div class="panel-heading">
              <h3 class="panel-title">端末設定</h3>
            </div>
            <div class="panel-body">
              <div class="col-md-6">
                <a href="/dashboard/nodes" class="btn btn-info btn-lg btn-block"><i class="fa fa-plus"></i>&nbsp;&nbsp;&nbsp; 端末追加</a>
              </div>
              <div class="col-md-6">
                <a href="/dashboard/nodes" class="btn btn-danger btn-lg btn-block"><i class="fa fa-minus"></i>&nbsp;&nbsp;&nbsp; 端末削除</a>
              </div>
            </div>
          </div>
        </div>
      </div>

      <hr />

      <div class="row">
        <div class="col-md-12">
          <h3>端末リスト</h3>
          <table class="table table-striped table-hover" id="node-list">
            <thead>
              <tr>
                <th>#</th>
                <th>名前</th>
                <th>端末 ID</th>
                <th>場所</th>
                <th>ステータス</th>
              </tr>
            </thead>
            <tbody>
            <% data.each do |d| %>
              <tr>
                <td><%= d["id"] %></td>
                <td><a href="/dashboard/nodes/<%= d["id"] %>"><%= d["alias"] %></a></td>
                <td><a href="/dashboard/nodes/<%= d["id"] %>">xxxxxxx0<%= d["id"] %>_uuid</a></td>
                <td><a href="/dashboard/map"><i class="fa fa-map-marker"></i> Go to map</a></td>
                <td><span class="label label-success"><i class="fa fa-check"></i> Online</span></td>
              </tr>
            <% end %>
            </tbody>
          </table>
        </div>
      </div>

    </div>
    <script type="text/javascript">
      window.data = <%= data.to_json %>;
    </script>
  </body>
</html>
